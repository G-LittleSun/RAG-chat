# Gradio 界面使用指南

## 🎯 快速入门

访问地址: **https://localhost:8000/gradio** (推荐使用 HTTPS)

---

## 📑 界面导航

界面分为 3 个标签页，每个标签页都有独特的功能：

### 1️⃣ 💬 普通聊天

适合日常对话、编程问题、知识问答等场景。

#### 主要区域
- **对话窗口**: 显示你和 AI 的对话历史
- **输入框**: 输入你的问题或消息
- **发送按钮**: 发送消息（也可以按回车键）
- **控制按钮**: 
  - 🗑️ 清除对话：清空当前会话的所有消息
  - ✨ 新建会话：创建一个新的对话会话

#### 右侧面板
- **当前会话 ID**: 显示当前会话的唯一标识符
- **历史消息数量**: 显示当前会话中的消息总数

#### 使用步骤
```
1. 点击"新建会话"按钮创建会话
2. 在输入框中输入问题，例如："你好，请介绍一下自己"
3. 点击"发送"或按回车键
4. AI 会以流式方式逐字显示回答
5. 继续输入问题进行连续对话
```

#### 特色功能
- ✅ **流式响应**: 实时显示 AI 生成的内容
- ✅ **上下文记忆**: 记住最近 10 条对话历史
- ✅ **复制功能**: 点击消息右上角复制按钮
- ✅ **会话隔离**: 不同会话独立管理

---

### 2️⃣ 📚 RAG 文档问答

适合基于特定文档内容进行精准问答。

#### 主要区域（左侧）
- **问答窗口**: 显示基于文档的问答历史
- **问题输入框**: 输入关于文档的问题
- **发送按钮**: 发送问题
- **控制按钮**: 
  - 🗑️ 清除对话：清空当前 RAG 会话
  - ✨ 新建会话：创建新的 RAG 会话

#### 文档管理（右侧）
- **上传文档**: 
  - 支持格式：PDF、TXT、DOC、DOCX
  - 点击或拖拽上传文件
- **上传按钮**: 确认上传选中的文件
- **上传状态**: 显示上传成功或失败信息
- **刷新文档列表**: 查看已上传的所有文档
- **已上传文档**: 显示文档列表，包括文件名、文本块数、上传时间

#### 使用步骤
```
1. 准备文档
   - 找到你想要提问的文档（PDF/TXT/Word）
   
2. 上传文档
   - 点击"上传文档"区域
   - 选择文件
   - 点击"上传"按钮
   - 等待上传成功提示（✅）
   
3. 查看文档
   - 点击"刷新文档列表"
   - 确认文档已上传
   
4. 提问
   - 在输入框输入问题，例如："这个文档的主要内容是什么？"
   - 点击"发送"
   - AI 会基于文档内容回答
   
5. 继续提问
   - 可以继续提问相关问题
   - AI 会结合文档和对话历史回答
```

#### 特色功能
- ✅ **智能检索**: 自动找到文档中相关的内容
- ✅ **多文档支持**: 可上传多个文档，统一检索
- ✅ **文档管理**: 查看已上传文档列表
- ✅ **上下文理解**: 理解你的连续提问

#### 实际应用场景
1. **学术研究**: 上传论文，提问关键问题
2. **工作文档**: 快速查找合同、报告中的信息
3. **学习资料**: 上传教材，进行知识问答
4. **技术文档**: 快速查找 API 使用方法

---

### 3️⃣ ℹ️ 系统信息

查看系统配置和状态信息。

#### 显示内容
- **配置信息**:
  - 模型名称（如：deepseek-r1:1.5b）
  - 模型地址（Ollama 服务地址）
  - 向量数据库类型
  - 历史消息数量
  - 文本分块配置
  
- **功能特性**: 系统支持的功能列表

- **相关链接**:
  - GitHub 仓库
  - API 文档 (/docs)
  - 原 HTML 界面 (/chat)

- **向量存储状态**:
  - 点击"检查向量存储状态"按钮
  - 查看向量数据库详细信息
  - JSON 格式显示

---

## 🎨 界面技巧

### 快捷键
- **发送消息**: 在输入框中按 `Enter` 键
- **换行**: 按 `Shift + Enter`（多行输入）
- **复制消息**: 点击消息右上角的复制图标

### UI 特性
- **响应式设计**: 自动适配不同屏幕大小
- **主题**: Soft 蓝色主题，支持浅色/深色模式（跟随系统）
- **消息头像**: 用户消息无头像，AI 消息显示 🤖 图标

### 会话管理
- **普通聊天会话**: 独立于 RAG 会话
- **RAG 会话**: 独立于普通聊天
- **会话 ID**: 自动生成，无需手动管理

---

## ❓ 常见问题

### Q: 为什么要使用 HTTPS？
**A**: 项目启用了 HTTPS 以确保数据传输安全。开发环境中使用自签名证书，浏览器会显示警告，点击"继续访问"即可。

### Q: 上传文档失败怎么办？
**A**: 
1. 检查文件格式（PDF/TXT/DOC/DOCX）
2. 确保文件大小合理（建议 < 10MB）
3. 查看"上传状态"中的错误信息
4. 检查向量数据库是否正常（系统信息页面）

### Q: RAG 回答不准确怎么办？
**A**: 
1. 确保文档内容清晰
2. 问题尽量具体明确
3. 检查文档是否成功上传
4. 尝试换一种提问方式

### Q: 如何清空所有文档？
**A**: 目前 Gradio 界面不支持批量删除，需要通过 API 或后台管理。未来版本会添加此功能。

### Q: 普通聊天和 RAG 问答有什么区别？
**A**: 
- **普通聊天**: 基于模型的知识回答，适合通用问题
- **RAG 问答**: 基于上传的文档回答，适合特定内容查询

### Q: 会话 ID 有什么用？
**A**: 
- 用于区分不同的对话
- 后台用于管理和存储会话历史
- 可用于调试和问题追踪

---

## 🆚 与 HTML 界面的区别

| 特性 | Gradio 界面 | HTML 界面 |
|------|-------------|-----------|
| 界面设计 | 现代化、组件化 | 传统样式 |
| 操作便捷性 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| 功能整合 | 单页多标签 | 多个独立页面 |
| 会话管理 | 自动管理 | 手动管理 |
| 文档上传 | 拖拽上传 | 选择文件 |
| 响应式 | 完全支持 | 部分支持 |
| 主题 | 内置多主题 | 固定样式 |
| 维护成本 | 低 | 高 |

---

## 🚀 进阶使用

### 1. 批量文档上传
```
1. 准备多个相关文档
2. 逐个上传（未来版本支持批量）
3. 所有文档会被统一索引
4. 提问时自动检索所有相关内容
```

### 2. 多轮对话技巧
```
- 第一轮：总体性问题（如："文档讲了什么？"）
- 第二轮：具体问题（如："关于 XX 部分详细说明"）
- 第三轮：对比问题（如："和 YY 有什么区别？"）
```

### 3. 最佳实践
- ✅ **清晰的文档**: 上传结构清晰的文档效果更好
- ✅ **具体的问题**: 问题越具体，回答越精准
- ✅ **分步提问**: 复杂问题分解成多个小问题
- ✅ **验证答案**: 重要信息建议查看原文档确认

---

## 📞 反馈与支持

- **GitHub Issues**: [提交问题或建议](https://github.com/G-LittleSun/RAG-chat/issues)
- **文档**: 查看 `docs/` 目录下的详细文档
- **API 文档**: https://localhost:8000/docs

---

## 📝 更新日志

### v3.2.0 (2025-10-20)
- ✨ 首次发布 Gradio 界面
- 🎨 三个功能标签页
- 📁 文档管理功能
- 🔍 系统状态查询

---

**祝你使用愉快！** 🎉

有任何问题欢迎反馈！
