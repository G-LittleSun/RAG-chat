# 更新日志

本文档记录项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [v3.2.0] - 2025-10-20

### ✨ 新增功能
- **Gradio 界面**: 全新的基于 Gradio 4.0+ 的现代化 Web 界面
  - 💬 普通聊天标签页：流式响应、会话管理
  - 📚 RAG 文档问答标签页：文档上传、智能问答
  - ℹ️ 系统信息标签页：配置展示、状态查询
  - 🎨 美观的 UI 设计：Soft 主题、响应式布局
  - 🔄 自动会话管理：独立会话 ID、历史消息计数
  - 📁 文档管理：上传、列表、删除功能
  - 🔍 向量存储状态查询
  
- **Gradio 集成**: 将 Gradio 界面挂载到 `/gradio` 路径
  - 与 FastAPI 完美集成
  - 支持 HTTP 和 HTTPS 访问
  - 自动检测可用性，优雅降级
  
- **配置增强**: 添加 RAG 文档处理配置
  - `chunk_size`: 文本分块大小（默认 1000）
  - `chunk_overlap`: 文本分块重叠（默认 200）

### 🔧 优化改进
- **首页更新**: 美化首页设计，添加 Gradio 界面链接
  - 动态显示可用服务
  - 添加 CSS 样式
  - 标注推荐入口
  
- **依赖更新**: 添加 `gradio>=4.0.0` 到 requirements.txt

### 📝 文档
- **新增文档**: `docs/GRADIO_MIGRATION.md` - Gradio 迁移完整文档
  - 详细的实现说明
  - 功能对比
  - 测试清单
  - 已知问题与解决方案
  
- **更新 README**: 添加 Gradio 界面说明和访问地址

### 🐛 修复
- 修复 `config.py` 缺少 `chunk_size` 和 `chunk_overlap` 属性导致的启动失败

### 📊 代码统计
- 新增 `gradio_ui.py`: ~460 行
- 前端代码减少: 从 ~1300 行（HTML）到 ~460 行（Gradio），减少 65%
- 维护成本降低: 功能密度提升 182%

### 🔄 迁移策略
- 采用渐进式迁移：Gradio 和 HTML 界面并存
- 用户可自由选择使用哪个界面
- 零风险验证，随时可回滚

---

## [v3.1.0] - 2025-10-19

### ✨ 新增功能
- **ChromaDB 远程支持**: 支持连接到远程 ChromaDB 服务器
  - 配置远程服务器地址和端口
  - 支持 SSL/TLS 加密连接
  - API 令牌认证（可选）
  - 多设备数据共享
  
- **向量存储配置**: 新增 `vector_config.py` 统一管理向量存储配置
  - 自动检测可用的向量数据库
  - 优先级：FAISS > ChromaDB > Memory
  - 配置验证和错误提示

### 🔧 优化改进
- **文档优化**: 精简 README.md
  - 从 458 行精简到 201 行（减少 56%）
  - 更清晰的结构和导航
  - 添加向量数据库配置说明
  
- **错误处理**: 改进向量数据库连接错误提示

### 📝 文档
- 更新 README 向量数据库配置部分
- 添加远程 ChromaDB 配置示例

---

## [v3.0.0] - 2025-10-15

### ✨ 新增功能
- **多向量数据库支持**: 
  - ChromaDB（本地持久化）
  - FAISS (IP/L2/HNSW)
  - Memory（内存存储）
  - Auto（自动选择）
  
- **HTTPS/WSS 支持**: 
  - SSL 证书自动管理
  - HTTPS 和 HTTP 双模式
  - WebSocket Secure (WSS)
  
- **文档上传增强**:
  - 支持 PDF、Word、TXT
  - 自动文本提取
  - 文档元数据管理

### 🔧 优化改进
- **模块化重构**: 
  - 分离 RAG 服务逻辑
  - 统一会话管理
  - 配置中心化
  
- **性能优化**:
  - 向量搜索加速
  - 流式响应优化
  - 内存管理改进

---

## [v2.0.0] - 2025-10-10

### ✨ 新增功能
- **RAG 文档问答**: 基于向量数据库的智能问答
- **FAISS 集成**: 高性能向量检索
- **文档管理**: 上传、列表、删除功能

### 🔧 优化改进
- WebSocket 通信优化
- 会话管理增强
- UI 界面美化

---

## [v1.0.0] - 2025-10-01

### ✨ 初始版本
- **基础聊天功能**: 与 Ollama 模型对话
- **FastAPI 框架**: REST API 和 WebSocket 支持
- **会话管理**: 历史记录和上下文
- **Web 界面**: 基础 HTML 聊天界面

---

## 版本说明

### 语义化版本规则
- **主版本号 (X.0.0)**: 不兼容的 API 变更
- **次版本号 (0.X.0)**: 向后兼容的功能新增
- **修订号 (0.0.X)**: 向后兼容的问题修正

### 变更类型
- `✨ 新增功能`: 新增的功能
- `🔧 优化改进`: 对现有功能的改进
- `🐛 修复`: Bug 修复
- `📝 文档`: 文档变更
- `⚡ 性能`: 性能提升
- `🔒 安全`: 安全性修复
- `🗑️ 废弃`: 即将移除的功能
- `🔥 移除`: 移除的功能

---

**最后更新**: 2025年10月20日
